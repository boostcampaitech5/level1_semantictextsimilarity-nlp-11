# ğŸ† Level 1 Project :: STS(Semantic Text Similarity)

### ğŸ“œ Abstract
> ë¶€ìŠ¤íŠ¸ ìº í”„ AI-Tech 5ê¸° NLP Level 1 ê¸°ì´ˆ í”„ë¡œì íŠ¸ ê²½ì§„ëŒ€íšŒë¡œ, Daconê³¼ Kaggleê³¼ ìœ ì‚¬í•­ ëŒ€íšŒí˜• ë°©ì‹ìœ¼ë¡œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤. ë‘ ë¬¸ì¥ì´ ì˜ë¯¸ì ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ìœ ì‚¬í•œì§€ë¥¼ ìˆ˜ì¹˜í™”í•˜ëŠ” N21 ìì—°ì–´ì²˜ë¦¬ Taskì¸ ì˜ë¯¸ ìœ ì‚¬ë„ íŒë³„(Semantic Text Similarity, STS)ë¥¼ ì£¼ì œë¡œ, ëª¨ë“  íŒ€ì›ì´ ë°ì´í„° ì „ì²˜ë¦¬ë¶€í„° ëª¨ë¸ì˜ í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ì— ì´ë¥´ê¸°ê¹Œì§€ AI ëª¨ë¸ë§ì˜ ì „ê³¼ì •ì„ ëª¨ë‘ê°€ End-to-Endë¡œ í˜‘ì—…í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. 

<br>

## ğŸ–ï¸Project Leader Board 
![public_1st](https://img.shields.io/static/v1?label=Public%20LB&message=1st&color=yellow&logo=naver&logoColor=white") ![private_2nd](https://img.shields.io/static/v1?label=Private%20LB&message=2nd&color=silver&logo=naver&logoColor=white">)
- ğŸ¥‡ Public Leader Board
<img width="1089" alt="public_leader_board" src="https://user-images.githubusercontent.com/81630351/234538736-4a1f4447-2aed-4187-9ac9-cf03cc65c507.png">
- ğŸ¥ˆPrivate Leader Board 
<img width="1089" alt="private_leader_board" src="https://user-images.githubusercontent.com/81630351/234539421-144d8ea6-a8ad-47c8-bee4-45c488ca4cfc.png">

- [ğŸ“ˆ NLP 11ì¡° Project Wrap-Up report ì‚´í´ë³´ê¸°](https://github.com/boostcampaitech5/level1_semantictextsimilarity-nlp-11/files/11331465/NLP.11.Wrap-Up._.pdf)

<br>

## ğŸ§‘ğŸ»â€ğŸ’» Team Introduction & Members 

> Team name : ìœ¤ìŠ¬ [ NLP 11ì¡° ] 

### ğŸ‘¨ğŸ¼â€ğŸ’» Members
ê°•ë¯¼ì¬|ê¹€ì£¼ì›|ê¹€íƒœë¯¼|ì‹ í˜ì¤€|ìœ¤ìƒì›|
:-:|:-:|:-:|:-:|:-:
<img src='https://avatars.githubusercontent.com/u/39152134?v=4' height=80 width=80px></img>|<img src='https://avatars.githubusercontent.com/u/81630351?v=4' height=80 width=80px></img>|<img src='https://avatars.githubusercontent.com/u/96530685?v=4' height=80 width=80px></img>|<img src='https://avatars.githubusercontent.com/u/96534680?v=4' height=80 width=80px></img>|<img src='https://avatars.githubusercontent.com/u/38793142?v=4' height=80 width=80px></img>
[Github](https://github.com/mjk0618)|[Github](https://github.com/Kim-Ju-won)|[Github](https://github.com/taemin6697)|[Github](https://github.com/jun048098)|[Github](https://github.com/SangwonYoon)
kminjae618@gmail.com|kjwt1124@hufs.ac.kr|taemin6697@gmail.com|jun048098@gmail.com|iandr0805@gmail.com

### ğŸ§‘ğŸ»â€ğŸ”§ Members' Role
> ëŒ€ë¶€ë¶„ì˜ íŒ€ì›ë“¤ì´ ì²« NLP ë„ë©”ì¸ì˜ í”„ë¡œì íŠ¸ì¸ë§Œí¼ ëª…í™•í•œ ê¸°ì¤€ì„ ê°€ì§€ê³  ì—…ë¬´ë¥¼ êµ¬ë¶„í•œ ê²ƒë³´ë‹¤ ë‹¤ì–‘í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ê¸°ë¥´ê¸° ìœ„í•´ ë°ì´í„° ì „ì²˜ë¦¬ë¶€í„° ëª¨ë¸ íŠœë‹ê¹Œì§€ End-to-Endë¡œ ê²½í—˜í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•˜ì—¬ í˜‘ì—…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ê°ì íŠœë‹í•  ëª¨ë¸ì„ í• ë‹¹í•˜ì—¬ í•˜ì´í¼ íŒŒë¼ë¯¸í„° íŠœë‹ì„ í•˜ê³  ë°ì´í„° ì „ì²˜ë¦¬, ì¦ê°• ë“± ë³¸ì¸ì˜ ì•„ì´ë””ì–´ë¥¼ êµ¬í˜„í•˜ë˜ ì„œë¡œì˜ ë‚´ìš©ì´ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ë¶„ì—…ì„ í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

| ì´ë¦„ | ì—­í•  |
| --- | --- |
| **`ê°•ë¯¼ì¬`** | **ëª¨ë¸ íŠœë‹**(`electra-kor-base , koelectra-base-v3-discriminator`),**ë°ì´í„° ì¦ê°•**(`back translation / switching sentence pair /ì„ì˜ê¸€ìì‚½ì…ë°ì œê±°`),**ë°ì´í„° ì „ì²˜ë¦¬ ì‹¤í—˜**(`ë ˆì´ë¸” ì •ìˆ˜í™” ë° ë…¸ì´ì¦ˆì¶”ê°€`),**Ensemble ì‹¤í—˜**(`output í‰ê· , í‘œì¤€í¸ì°¨í™œìš©`),**EDA**(`ê¸€ììˆ˜ ê¸°ë°˜ ë°ì´í„° ë¶„í¬ ë¶„ì„`) |
| **`ê¹€íƒœë¯¼`** | **Hugging Face ê¸°ë°˜ Baseline ì½”ë“œ ì‘ì„±** , **Taskì— ì í•©í•œ ëª¨ë¸ Search ë° ë¶„ë°°** , **ëª¨ë¸ ì‹¤í—˜ ì´ê´„** , **ë°ì´í„° ì „ì²˜ë¦¬ ì‹¤í—˜**(`Random Token Masking , Label Random Noise, Fill Random Token Mask, Source Tagging`), **Custom Loss ì‹¤í—˜**(`Binary Cross Entropy + Focal Loss`),**ëª¨ë¸ íŠœë‹**(`xlm-roberta-large, electra-kor-base`),**ëª¨ë¸ Ensemble** |
| **`ê¹€ì£¼ì›`** | **ëª¨ë¸ íŠœë‹**(`kobigbird-bert-base, electra-kor-base`),**EDA**(`ë¼ë²¨ ë¶„í¬ ë°ì´í„°ë¶„ì„`),**EDA ê¸°ë°˜ ë°ì´í„° ì¦ê°• ì•„ì´ë””ì–´ ì œì‹œ** , **ë°ì´í„° ì¦ê°•**(`Easy Augmented DataSR ì¦ê°•`),**íŒ€ í˜‘ì—… í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬**(`Github íŒ€ê´€ë¦¬+ íŒ€ Notion í˜ì´ì§€ê´€ë¦¬`) ,**Custom Loss ì‹¤í—˜**(`RMSE`) |
| **`ìœ¤ìƒì›`** | **ëª¨ë¸ íŠœë‹**(`koelectra-base-finetuned-nsmc, KR-ELECTRA-discriminator ëª¨ë¸íŠœë‹`),**ë°ì´í„° ì¦ê°•**(`label rescaling, ë‹¨ìˆœë³µì œë°ì´í„°ì¦ê°•, ì–´ìˆœë„ì¹˜ë°ì´í„°ì¦ê°•, under sampling + swap sentence + copied sentence + uniform distribution + random noise`),**ëª¨ë¸ Ensemble** |
| **`ì‹ í˜ì¤€`** &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | **ëª¨ë¸ íŠœë‹**(`KR-ELECTRA-discriminator, mdeberta-v3-base-kor-further`)**ë°ì´í„° ì¦ê°•**(`ë§ì¶¤ë²•êµì •ì¦ê°•,EDA(Easy Data Augmentation) SR(Synonym Replacement)í’ˆì‚¬ì„ íƒ(ëª…ì‚¬, ì¡°ì‚¬) êµì²´+ swap sentence + copied sentence, Data Distribution`),**ë°ì´í„° ì „ì²˜ë¦¬ ì‹¤í—˜**(`ë§ì¶¤ë²•êµì •`) |

<br>

## ğŸ–¥ï¸ Project Introduction 


|**í”„ë¡œì íŠ¸ ì£¼ì œ**| **`Semantic Text Similarity (STS)` :** ë‘ í…ìŠ¤íŠ¸ê°€ ì–¼ë§ˆë‚˜ ìœ ì‚¬í•œì§€ íŒë‹¨í•˜ëŠ” NLP Task|
| --- | --- |
|**í”„ë¡œì íŠ¸ êµ¬í˜„ë‚´ìš©**| 1. Hugging Faceì˜ Pretrained ëª¨ë¸ê³¼STS ë°ì´í„°ì…‹ì„ í™œìš©í•´ ë‘ ë¬¸ì¥ì˜ 0ê³¼ 5ì‚¬ì´ì˜ ìœ ì‚¬ë„ë¥¼ ì¸¡ì •í•˜ëŠ” AIëª¨ë¸ì„ êµ¬ì¶• <br>2. ë¦¬ë”ë³´ë“œ í‰ê°€ì§€í‘œì¸ í”¼ì–´ìŠ¨ ìƒê´€ ê³„ìˆ˜(Pearson Correlation Coefficient ,PCC)ì—ì„œ ë†’ì€ ì ìˆ˜(1ì— ê°€ê¹Œìš´ ì ìˆ˜)ì— ë„ë‹¬í•  ìˆ˜ ìˆë„ë¡ ë°ì´í„° ì „ì²˜ë¦¬, ì¦ê°•, í•˜ì´í¼ íŒŒë¼ë¯¸í„° íŠœë‹ì„ ì§„í–‰|
|**ê°œë°œ í™˜ê²½**|**â€¢ `GPU` :** Tesla V100 ì„œë²„ 5ê°œ (RAM32G) / K80, T4, and P100 ëœë¤ í• ë‹¹(RAM52G) /GeForce RTX 4090 ë¡œì»¬ (RAM 24GB), Rtx3060ti 8gb ë¡œì»¬ 2ëŒ€ (RAM 8 GB)<br>**â€¢ `ê°œë°œ Tool` :** PyCharm, Jupyter notebook, VS Code [ì„œë²„ SSHì—°ê²°], Colab Pro +, wandb |
|**í˜‘ì—… í™˜ê²½**|**â€¢ `Github Repository` :** Baseline ì½”ë“œ ê³µìœ  ë° ë²„ì „ ê´€ë¦¬, issue í˜ì´ì§€ë¥¼ í†µí•˜ ì‹¤í—˜ ì§„í–‰ <br>**â€¢ `Notion` :** STS í”„ë¡œì íŠ¸ í˜ì´ì§€ë¥¼ í†µí•œ ì—­í• ë¶„ë‹´, ì•„ì´ë””ì–´ ë¸Œë ˆì¸ ìŠ¤í† ë°, ëŒ€íšŒê´€ë ¨ íšŒì˜ ë‚´ìš© ê¸°ë¡ <br>**â€¢ `SLACK, Zoom` :** ì‹¤ì‹œê°„ ëŒ€ë©´/ë¹„ëŒ€ë©´ íšŒì˜|

## ğŸ“ Project Structure
```
ğŸ“¦level1_semantictextsimilarity-nlp-11
 â”£ .gitignore
 â”£ config_yaml
 â”ƒ â”£ kykim.yaml
 â”ƒ â”£ snunlp.yaml
 â”ƒ â”£ test.yaml
 â”ƒ â”— xlm_roberta_large.yaml
 â”£ data
 â”ƒ â”£ train.csv
 â”ƒ â”£ aug_train.csv
 â”ƒ â”£ dev.csv
 â”ƒ â”— test.csv
 â”£ wordnet
 â”ƒ â”— wordnet.pickle
 â”£ esnb
 â”ƒ â”— esnb.csv
 â”£ output
 â”ƒ â”£ xlm_roberta_large.csv
 â”ƒ â”£ kykim.csv
 â”ƒ â”— snunlp.csv
 â”£ .gitignore
 â”£ Readme.md
 â”£ augmentation.py
 â”£ dataloader.py
 â”£ esnb.py
 â”£ infer.py
 â”£ train.py
 â”— utils.py
 ```

## ğŸ“ Project Ground Rule
>íŒ€ í˜‘ì—…ì„ ìœ„í•´ í”„ë¡œì íŠ¸ ê´€ë ¨ Ground Ruleì„ ì„¤ì •í•˜ì—¬ í”„ë¡œì íŠ¸ê°€ ì›í™œí•˜ê²Œ ëŒì•„ê°ˆ ìˆ˜ ìˆë„ë¡ íŒ€ ê·œì¹™ì„ ì •í–ˆìœ¼ë©°, ë‚ ì§œ ë‹¨ìœ„ë¡œ ê°„ëµí•œ ëª©í‘œë¥¼ ì„¤ì •í•˜ì—¬ í˜‘ì—…ì„ ì›í™œí•˜ê²Œ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ ê³„íšì„ í•˜ì—¬ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

**-a. `ì‹¤í—˜ ê´€ë ¨ Ground Rule`** : ë³¸ì¸ ì‹¤í—˜ ì‹œì‘í•  ë•Œ, Github issueì— `"[score ì ìˆ˜(ì—†ë‹¤ë©´ --)] ëª¨ë¸ì´ë¦„, data = ë°ì´í„° ì¢…ë¥˜, ì „ì²˜ë¦¬ ì¢…ë¥˜, ë°ì´í„° ì¦ê°• ì¢…ë¥˜"`ì–‘ì‹ìœ¼ë¡œ `issue`ë¥¼ ì˜¬ë¦° ë’¤ ì‹¤í—˜ì„ ì‹œì‘í•œë‹¤.

**-b. `Commit ê´€ë ¨ Ground Rule`** : `git commit & push`ëŠ” í•œë²ˆ `ì‹¤í—˜í•  ë•Œ` ë§ˆë‹¤ ì§„í–‰í•œë‹¤. `ì½”ë“œ ìˆ˜ì • ë‚´ìš©, ì ìˆ˜, ê´€ë ¨ëœ issue`ê°€ ë“¤ì–´ê°€ë„ë¡ commití•˜ê³  ê°œì¸ branchì— pushí•œë‹¤.

**-c. `Submission ê´€ë ¨ Ground Rule:`** ê° ì‚¬ëŒë³„ë¡œ í•˜ë£¨ submission íšŸìˆ˜ëŠ” `2íšŒ`ì”© í• ë‹¹í•œë‹¤. ì¶”ê°€ë¡œ submissionì„ í•˜ê³  ì‹¶ìœ¼ë©´ SLACK ë‹¨ì²´ í†¡ë°©ì—ì„œ í•´ë‹¹ ë‚ ì§œì— submissionê³„íšì´ ì—†ëŠ” í˜¹ì€, íšŸìˆ˜ê°€ ë‚¨ëŠ” ì‚¬ëŒì—ê²Œ ë¬¼ì–´ë´ì„œ ì—¬ìœ ê°€ ëœë‹¤ë©´ ì¶”ê°€ submission ê°€ëŠ¥í•˜ë‹¤.
<br>

## ğŸ—“ï¸ Project Procedure
- **`(1~3ì¼ì°¨)`**: NLP ê¸°ì´ˆ ëŒ€íšŒ ê´€ë ¨ ëŒ€íšŒ ê°•ì˜ ë° ìŠ¤í˜ì…œ ë¯¸ì…˜ ì™„ë£Œ & í˜‘ì—… ê´€ë ¨ Ground Rule ì„¤ì •
- **`(3~4ì¼ì°¨)`**: STS Baseline ì½”ë“œ ì™„ì„± & EDA(Exploratory Data Analysis) & ì „ì²˜ë¦¬/ì¦ê°• ê´€ë ¨ ì•„ì´ë””ì–´ íšŒì˜
- **`(5~14ì¼ì°¨)`** : ì „ì²˜ë¦¬, ë°ì´í„° ì¦ê°•, í•˜ì´í¼ íŒŒë¼ë¯¸í„° íŠœë‹ ë“± ì•„ì´ë””ì–´ êµ¬í˜„ ë° ì‹¤í—˜ ì§„í–‰

*ì•„ë˜ëŠ” ì €í¬ í”„ë¡œì íŠ¸ ì§„í–‰ê³¼ì •ì„ ë‹´ì€ Ganttì°¨íŠ¸ ì…ë‹ˆë‹¤. 

![road_map](https://user-images.githubusercontent.com/81630351/234539749-d2f7423d-9895-4aeb-a458-4ae593bc4db8.png)

<br>

## ğŸ’» Getting Started

### âš ï¸ Requirements
```bash
python=3.8
pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu117
pip3 install transformers
pip3 install pandas
pip3 install scipy
pip3 install soynlp
pip3 install git+https://github.com/haven-jeon/PyKoSpacing.git
pip3 install git+https://github.com/jungin500/py-hanspell
pip3 install konlpy
```

### âŒ¨ï¸ How To install Requirements
```bash
#í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
pip install -r requirements.txt
```

### âŒ¨ï¸How To Train 
```bash
# ë°ì´í„° ì¦ê°•
python3 augmentation.py
# train.py ì½”ë“œ ì‹¤í–‰ : ëª¨ë¸ í•™ìŠµ ì§„í–‰
python3 train.py
```

### âŒ¨ï¸ How To Infer output.csv
#ì˜ˆì¸¡ ëª…ë ¹ì–´ output.csv ìƒì„±
```bash
# infer.py ì½”ë“œ ì‹¤í–‰ : í›ˆë ¨ëœ ëª¨ë¸ load + sample_submissionì„ ì´ìš©í•œ train ì§„í–‰
python3 infer.py 
```
